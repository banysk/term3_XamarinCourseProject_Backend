-- drop if exists
DROP TABLE IF EXISTS BILLS_HISTORY CASCADE;

CREATE TABLE BILLS_HISTORY
(id SERIAL, -- ID операции
 user_id INT, -- ID пользователя
 move_from VARCHAR(20), -- Откуда
 move_to VARCHAR(20), -- Куда
 amount INT, -- Сколько
 operation_type INT, -- Тип операции
 operation_time TIMESTAMP, -- Время операции
 -----
 PRIMARY KEY(id),
 FOREIGN KEY(user_id)
 	REFERENCES public.USERS(id),
 FOREIGN KEY(operation_type)
 	REFERENCES public.OPERATION_TYPES(id),
 -----
 CHECK(id IS NOT NULL),
 CHECK(user_id IS NOT NULL),
 CHECK(move_from IS NOT NULL),
 CHECK(move_to IS NOT NULL),
 CHECK(operation_type IS NOT NULL),
 CHECK(operation_time IS NOT NULL)
);